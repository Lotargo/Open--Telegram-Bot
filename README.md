# üß† The Sentient Secretary: A Neuro-Adaptive Telegram Bot

**–ë–æ–ª—å—à–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ –±–æ—Ç. –≠–º—É–ª—è—Ü–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Å–æ–∑–Ω–∞–Ω–∏—è.**

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —ç–≤–æ–ª—é—Ü–∏—é –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ Telegram-–±–æ—Ç–∞ –≤ –Ω–µ—á—Ç–æ –±–æ–ª—å—à–µ–µ. –≠—Ç–æ "—Ä–∞–∑—É–º–Ω—ã–π" —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–µ–∫—Ä–µ—Ç–∞—Ä—å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–∫—Ä–∏–ø—Ç—É, –∞ **–æ–±–ª–∞–¥–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ª–∏—á–Ω–æ—Å—Ç—å—é**, —Å–ø–æ—Å–æ–±–Ω–æ–π –º–µ–Ω—è—Ç—å—Å—è, —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –¥–∞–∂–µ –ø—Ä–æ—è–≤–ª—è—Ç—å "—ç–º–æ—Ü–∏–∏".

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–æ–≤—ã–µ LLM (Llama 3 —á–µ—Ä–µ–∑ Groq) –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≥–æ–ª–æ—Å–∞ (Edge-TTS + Whisper), —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –æ—â—É—â–µ–Ω–∏–µ –∂–∏–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è.

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üåê "Consciousness Web" (–ü–∞—É—Ç–∏–Ω–∞ –°–æ–∑–Ω–∞–Ω–∏—è)
–ë–æ—Ç –Ω–µ –∏–º–µ–µ—Ç –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ "—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞". –ï–≥–æ –ª–∏—á–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ –æ–±—â–µ–Ω–∏—è, —Å–ø–ª–µ—Ç–∞—è—Å—å –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º—É—Ç–∞—Ü–∏–π:
*   **Mood (–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ):** –û—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–¥–µ—Ä–∂–∞–Ω–Ω–æ—Å—Ç–∏ –¥–æ —Ü–∏–Ω–∏—á–Ω–æ–≥–æ —Å–∞—Ä–∫–∞–∑–º–∞ –∏–ª–∏ –≤–æ—Å—Ç–æ—Ä–∂–µ–Ω–Ω–æ–≥–æ –ø–æ—ç—Ç–∞.
*   **Style (–°—Ç–∏–ª—å —Ä–µ—á–∏):** –õ–∞–∫–æ–Ω–∏—á–Ω—ã–π –∫–æ–¥, –≤–∏—Ç–∏–µ–≤–∞—Ç—ã–µ –º–µ—Ç–∞—Ñ–æ—Ä—ã –∏–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∂–∞—Ä–≥–æ–Ω.
*   **Thought Process (–ú—ã—à–ª–µ–Ω–∏–µ):** –°—Ç—Ä–æ–≥–∞—è –ª–æ–≥–∏–∫–∞, —ç–º–ø–∞—Ç–∏—è –∏–ª–∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Ä–µ—à–µ–Ω–∏–π.
*   *–†–µ–∑—É–ª—å—Ç–∞—Ç:* –ö–∞–∂–¥—ã–π –¥–∏–∞–ª–æ–≥ —É–Ω–∏–∫–∞–ª–µ–Ω. –ë–æ—Ç –º–æ–∂–µ—Ç "–≤–∑–¥–æ—Ö–Ω—É—Ç—å" –æ—Ç –≥–ª—É–ø–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –∏–ª–∏ –≤–æ—Å—Ö–∏—Ç–∏—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ–π –∑–∞–¥–∞—á–µ–π.

### üó£Ô∏è Voice-First Mirroring (–ì–æ–ª–æ—Å–æ–≤–æ–µ –ó–µ—Ä–∫–∞–ª–æ)
–ë–æ—Ç —Å–ª—ã—à–∏—Ç –∏ –≥–æ–≤–æ—Ä–∏—Ç.
*   **–ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ —Ç–µ–∫—Å—Ç:** –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–º.
*   **–ï—Å–ª–∏ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ:** –ë–æ—Ç —Å–ª—É—à–∞–µ—Ç (Whisper STT), –¥—É–º–∞–µ—Ç –∏ **–æ—Ç–≤–µ—á–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º** (Edge-TTS "Svetlana"), –∞ –∑–∞—Ç–µ–º –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—É—é —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É.
*   **–ù–∞—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç:** –í–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ...", —Å–æ–∑–¥–∞–≤–∞—è –ø–æ–ª–Ω–æ–µ –æ—â—É—â–µ–Ω–∏–µ –æ–±—â–µ–Ω–∏—è —Å —á–µ–ª–æ–≤–µ–∫–æ–º.

### üõ°Ô∏è Smart Filters
*   **Markdown Cleaner:** –ë–æ—Ç "–æ—á–∏—â–∞–µ—Ç" —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥ –æ–∑–≤—É—á–∫–æ–π, —á—Ç–æ–±—ã –≥–æ–ª–æ—Å –Ω–µ —á–∏—Ç–∞–ª –≤—Å–ª—É—Ö –∑–≤–µ–∑–¥–æ—á–∫–∏, —Å–∫–æ–±–∫–∏ –∏ —Å—Å—ã–ª–∫–∏.
*   **Rate Limiting:** –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ API.

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

*   **Core:** Python 3.12, Aiogram 3.x (AsyncIO)
*   **Brain (LLM):** Llama 3.1 (via Groq API) + OpenAI SDK
*   **Voice Engine:**
    *   **STT (–°–ª—É—Ö):** Whisper Large V3 Turbo (Groq)
    *   **TTS (–ì–æ–ª–æ—Å):** Microsoft Edge-TTS (Neural Voice `ru-RU-SvetlanaNeural`)
    *   **Processing:** Pydub + FFmpeg (–¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ OGG Opus)
*   **Persona Engine:** Custom Jinja2 "Weaver"
*   **Storage:** MongoDB (User Data, History)
*   **Infrastructure:** Docker & Docker Compose

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   Docker & Docker Compose
*   (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Python 3.12 + Poetry –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ó–∞–ø—É—Å–∫ –≤ Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:
    ```bash
    cp .env.example .env
    ```
    –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–ª—é—á–∏:
    ```env
    BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
    GROQ_API_KEY=–≤–∞—à_–∫–ª—é—á_groq
    ADMIN_GROUP_ID=–≤–∞—à_id
    MONGO_URI=mongodb://mongo:27017/portfolio_bot
    ```

2.  **–ó–∞–ø—É—Å–∫:**
    ```bash
    docker-compose up --build -d
    ```
    *Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç `ffmpeg` –∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.*

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)

1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    *   `ffmpeg` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ!)

2.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python:**
    ```bash
    poetry install
    ```

3.  **–ó–∞–ø—É—Å–∫:**
    ```bash
    poetry run python -m src.bot
    ```

---

## üß† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ "–°–æ–∑–Ω–∞–Ω–∏—è"

–í—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å—é –±–æ—Ç–∞, –¥–æ–±–∞–≤–ª—è—è –Ω–æ–≤—ã–µ "–º—É—Ç–∞—Ü–∏–∏" –≤ –ø–∞–ø–∫—É `config/prompts/`:

*   `core/` - –ë–∞–∑–æ–≤–∞—è –ª–∏—á–Ω–æ—Å—Ç—å (–°–µ–∫—Ä–µ—Ç–∞—Ä—å).
*   `mood/` - –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏ (`cynical.j2`, `happy.j2`).
*   `style/` - –°—Ç–∏–ª–∏ —Ä–µ—á–∏ (`yoda.j2`, `business.j2`).
*   `thought/` - –°–ø–æ—Å–æ–±—ã –º—ã—à–ª–µ–Ω–∏—è (`logical.j2`, `chaotic.j2`).

*–ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π `.j2` —Ñ–∞–π–ª, –∏ "Weaver" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ –Ω–æ–≤—ã—Ö —Å–µ—Å—Å–∏—è—Ö!*

---

*–°–æ–∑–¥–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –∫ –∫–æ–¥—É –∏ —Ü–∏—Ñ—Ä–æ–≤—ã–º —Å—É—â–Ω–æ—Å—Ç—è–º.*
